{% load i18n %}


{% if patent_applications  %}
    <div class="overflow-x-auto">
        <table class="min-w-full divide-y divide-gray-200">
            <thead class="bg-gray-50 text-gray-700 text-sm font-semibold">
                <tr>
                    <td class="px-3 py-2"></td>
                    <td scope="col" class="px-3 py-2">{% trans 'Invention title' %}</td>
                    <td scope="col" class="px-3 py-2">{% trans 'Applicants & Inventors' %}</td>
                    <td scope="col" class="px-3 py-2">{% trans 'Type' %}</td>
                    <td scope="col" class="px-3 py-2">{% trans 'Status' %}</td>
                    <td scope="col" class="px-3 py-2">{% trans 'Date' %}</td>
                    <td scope="col" class="px-3 py-2">{% trans 'Identification' %}</td>
                    <td class="px-3 py-2"></td>
                </tr>
            </thead>

            <tbody class="divide-y divide-gray-100 text-sm text-gray-900">
                {% for patent in patent_applications %}
                    <tr>
                        <td class="px-3 py-2">
                            <input
                                class="h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-600/50"
                                name="patent_applications"
                                type="checkbox"
                                value="{{ patent.id }}">
                        </td>
                        <td class="px-3 py-2">
                            <a class="no-underline hover:underline text-blue-700">
                                {{ patent.invention_title }}
                            </a>
                        </td>

                        <td class="px-3 py-2">
                            {% if patent.first_applicant_name %}
                                <div>
                                    <span class="font-semibold">{% trans 'First applicant' %}</span>: {{ patent.first_applicant_name }}
                                </div>
                            {% endif %}

                            {% if patent.first_inventor_name %}
                                <div>
                                    <span class="font-semibold">{% trans 'First inventor' %}</span>: {{ patent.first_inventor_name }}
                                </div>
                            {% endif %}
                        </td>
                        <td class="px-3 py-2">
                            {{ patent.type_label }}
                            {% if patent.type_category %}
                                <div class="text-gray-500 text-xs">({{ patent.type_category }})</div>
                            {% endif %}
                        </td>

                        <td class="px-3 py-2">
                            {{ patent.status_description }}
                            {% if patent.status_date %}
                                <div class="text-gray-500 text-xs">({{ patent.status_date }})</div>
                            {% endif %}
                        </td>

                        <td class="px-3 py-2">
                            {% if patent.filing_date %}
                                <div>
                                    <span class="font-semibold">{% trans 'Filed' %}</span>: {{ patent.filing_date }}
                                </div>
                            {% endif %}

                            {% if patent.earliest_publication_date %}
                                <div>
                                    <span class="font-semibold">{% trans 'Earliest publication' %}</span>: {{ patent.earliest_publication_date }}
                                </div>
                            {% endif %}

                            {% if patent.grant_date %}
                                <div>
                                    <span class="font-semibold">{% trans 'Granted' %}</span>: {{ patent.grant_date }}
                                </div>
                            {% endif %}
                        </td>

                        <td class="px-3 py-2">
                            {% if patent.number %}
                                <div>
                                    <span class="font-semibold">{% trans 'Application number' %}</span>: {{ patent.number }}
                                </div>
                            {% endif %}

                            {% if patent.patent_number %}
                                <div>
                                    <span class="font-semibold">{% trans 'Patent number' %}</span>: {{ patent.patent_number }}
                                </div>
                            {% endif %}

                            {% if patent.earliest_publication_number %}
                                <div>
                                    <span class="font-semibold">{% trans 'Earliest publication number' %}</span>: {{ patent.earliest_publication_number }}
                                </div>
                            {% endif %}
                        </td>

                        <td class="px-3 py-2">
                            <a href="{% url 'companies:patent-application-update' patent.uuid %}{% if next %}?next={{ next|urlencode }}{% endif %}"
                               class="mx-1"
                               data-bs-toggle="tooltip"
                               data-bs-title="{% trans 'Edit' %}">
                                <i class="fas fa-pencil text-gray-500/50"></i>
                            </a>

                            <a href="{% url 'companies:patent-application-delete' patent.uuid %}{% if next %}?next={{ next|urlencode }}{% endif %}"
                               class="mx-1"
                               data-bs-toggle="tooltip"
                               data-bs-title="{% trans 'Delete' %}">
                                <i class="far fa-circle-xmark text-red-600/75"></i>
                            </a>
                        </td>

                    </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
{% else %}
    <div class="text-secondary">{% trans 'No patent application information found.' %}</div>
{% endif %}

{# Legacy hidden Vue-driven form removed; checkboxes now post within the parent form #}
